<?xml version="1.0"?>
<mamelayout version="2">

  <!-- Decoration definitions -->
  <element name="background">
    <rect>
      <color red="0.133" green="0.133" blue="0.133" />
    </rect>
  </element>
  <element name="display_glass">
    <rect>
      <color red="0" green="0" blue="0" />
      <bounds x="10" y="-2" width="92" height="27" />
    </rect>
  </element>
  <element name="up_triangle">
    <image>
      <data>
        <![CDATA[
          <svg width="2" height="1" viewBox="0 0 2 1">
          <path stroke="none" fill="#ffffff" d="M0 1H2L 1 0Z" />
          </svg>

        ]]></data>
    </image>
  </element>
  <element name="down_triangle">
    <image>
      <data>
        <![CDATA[
          <svg width="2" height="1" viewBox="0 0 2 1">
          <path stroke="none" fill="#ffffff" d="M0 0H2L1 1Z" />
          </svg>

        ]]></data>
    </image>
  </element>
  <element name="decorative_line">
    <rect>
      <color red="0.859" green="0.373" blue="0.416" />
      <bounds x="0" y="0" width="1" height="1" />
    </rect>
    <rect>
      <color red="0.859" green="0.373" blue="0.416" />
      <bounds x="0" y="0" width="1" height="1" />
    </rect>
  </element>
  <!-- VFD -->
  <!-- The VFD elements -->
  <element name="segments" defstate="0">
    <led14seg>
      <color red="0.45" green="1.0" blue="0.95" />
    </led14seg>
  </element>

  <element name="dot" defstate="0">
    <disk statemask="0x4000" state="0"><color red="0.06" green="0.12" blue="0.10" /></disk>
    <disk statemask="0x4000" state="0x4000"><color red="0.45" green="1.00" blue="0.95" /></disk>
  </element>

  <element name="underline" defstate="0">
    <rect statemask="0x8000" state="0"><color red="0.06" green="0.12" blue="0.10" /></rect>
    <rect statemask="0x8000" state="0x8000"><color red="0.45" green="1.00" blue="0.95" /></rect>
  </element>

  <group name="vfd_cell">
    <bounds x="0" y="0" width="342" height="572" />
    <element ref="segments" name="~input~"><bounds x="50" y="69" width="214" height="311" /></element>
    <element ref="dot" name="~input~"><bounds x="253" y="337" width="42" height="42" /></element>
    <element ref="underline" name="~input~"><bounds x="43" y="441" width="183" height="25" /></element>
  </group>

  <element name="vfd_background">
    <rect>
      <color red="0.0" green="0.0" blue="0.0" />
    </rect>
  </element>

  <group name="vfd">
    <element ref="vfd_background">
      <bounds x="0" y="0" width="13680" height="1144" />
    </element>

    <!-- VFDs -->
    <repeat count="2">
      <param name="s" start="0" increment="40" />
      <param name="y" start="0" increment="572" />
      <repeat count="40">
        <param name="n" start="~s~" increment="1" />
        <param name="x" start="0" increment="342" />

        <param name="input" value="vfd~n~" />
        <group ref="vfd_cell">
          <bounds x="~x~" y="~y~" width="342" height="572" />
        </group>

      </repeat>
    </repeat>
  </group>

  <!-- Text items -->
  <element name="text_bankset_C">
    <text string="BankSet" align="0" />
  </element>
  <element name="text_sounds_C">
    <text string="Sounds" align="0" />
  </element>
  <element name="text_presets_C">
    <text string="Presets" align="0" />
  </element>
  <element name="text_seq_C">
    <text string="Seq" align="0" />
  </element>
  <element name="text_0_C">
    <text string="0" align="0" />
  </element>
  <element name="text_1_C">
    <text string="1" align="0" />
  </element>
  <element name="text_2_C">
    <text string="2" align="0" />
  </element>
  <element name="text_3_C">
    <text string="3" align="0" />
  </element>
  <element name="text_4_C">
    <text string="4" align="0" />
  </element>
  <element name="text_5_C">
    <text string="5" align="0" />
  </element>
  <element name="text_6_C">
    <text string="6" align="0" />
  </element>
  <element name="text_7_C">
    <text string="7" align="0" />
  </element>
  <element name="text_8_C">
    <text string="8" align="0" />
  </element>
  <element name="text_9_C">
    <text string="9" align="0" />
  </element>
  <element name="text_replace_L">
    <text string="Replace" align="1" />
  </element>
  <element name="text_program_L">
    <text string="Program" align="1" />
  </element>
  <element name="text_1_6_L">
    <text string="1-6" align="1" />
  </element>
  <element name="text_7_12_L">
    <text string="7-12" align="1" />
  </element>
  <element name="text_select_L">
    <text string="Select" align="1" />
  </element>
  <element name="text_voice_L">
    <text string="Voice" align="1" />
  </element>
  <element name="text_copy_L">
    <text string="Copy" align="1" />
  </element>
  <element name="text_write_L">
    <text string="Write" align="1" />
  </element>
  <element name="text_compare_L">
    <text string="Compare" align="1" />
  </element>
  <element name="text_patch_L">
    <text string="Patch" align="1" />
  </element>
  <element name="text_midi_L">
    <text string="MIDI" align="1" />
  </element>
  <element name="text_effects_L">
    <text string="Effects" align="1" />
  </element>
  <element name="text_key_L">
    <text string="Key" align="1" />
  </element>
  <element name="text_zone_L">
    <text string="Zone" align="1" />
  </element>
  <element name="text_trans__L">
    <text string="Trans-" align="1" />
  </element>
  <element name="text_pose_L">
    <text string="pose" align="1" />
  </element>
  <element name="text_release_L">
    <text string="Release" align="1" />
  </element>
  <element name="text_volume_L">
    <text string="Volume" align="1" />
  </element>
  <element name="text_pan_L">
    <text string="Pan" align="1" />
  </element>
  <element name="text_timbre_L">
    <text string="Timbre" align="1" />
  </element>
  <element name="text_rec_L">
    <text string="Rec" align="1" />
  </element>
  <element name="text_stop_L">
    <text string="Stop" align="1" />
  </element>
  <element name="text__cont_L">
    <text string="/Cont" align="1" />
  </element>
  <element name="text_play_L">
    <text string="Play" align="1" />
  </element>
  <element name="text_click_L">
    <text string="Click" align="1" />
  </element>
  <element name="text_seq_L">
    <text string="Seq" align="1" />
  </element>
  <element name="text_control_L">
    <text string="Control" align="1" />
  </element>
  <element name="text_locate_L">
    <text string="Locate" align="1" />
  </element>
  <element name="text_song_L">
    <text string="Song" align="1" />
  </element>
  <element name="text_track_L">
    <text string="Track" align="1" />
  </element>
  <element name="text_master_L">
    <text string="Master" align="1" />
  </element>
  <element name="text_storage_L">
    <text string="Storage" align="1" />
  </element>
  <element name="text_wave_L">
    <text string="Wave" align="1" />
  </element>
  <element name="text_mod_L">
    <text string="Mod" align="1" />
  </element>
  <element name="text_mixer_L">
    <text string="Mixer" align="1" />
  </element>
  <element name="text_pitch_L">
    <text string="Pitch" align="1" />
  </element>
  <element name="text_filters_L">
    <text string="Filters" align="1" />
  </element>
  <element name="text_output_L">
    <text string="Output" align="1" />
  </element>
  <element name="text_lfo_L">
    <text string="LFO" align="1" />
  </element>
  <element name="text_env1_L">
    <text string="Env1" align="1" />
  </element>
  <element name="text_env2_L">
    <text string="Env2" align="1" />
  </element>
  <element name="text_env3_L">
    <text string="Env3" align="1" />
  </element>
  <element name="text_data_entry_L">
    <text string="Data Entry" align="1" />
  </element>
  <element name="text_performance_L">
    <text string="Performance" align="1" />
  </element>
  <element name="text_sequencer_L">
    <text string="Sequencer" align="1" />
  </element>
  <element name="text_programming_L">
    <text string="Programming" align="1" />
  </element>
  <!-- Button shapes -->
  <element name="button_6_4_light">
    <image state="0">
      <color red="0.733" green="0.733" blue="0.733" />
      <data>
        <![CDATA[
          <svg width="6" height="4" viewBox="0 0 6 4"><rect x="0.1" y="0.1" width="5.8" height="3.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
    <image state="1">
      <color red="1" green="1" blue="1" />
      <data>
        <![CDATA[
          <svg width="6" height="4" viewBox="0 0 6 4"><rect x="0.1" y="0.1" width="5.8" height="3.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
  </element>
  <element name="button_6_4_medium">
    <image state="0">
      <color red="0.467" green="0.467" blue="0.467" />
      <data>
        <![CDATA[
          <svg width="6" height="4" viewBox="0 0 6 4"><rect x="0.1" y="0.1" width="5.8" height="3.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
    <image state="1">
      <color red="1" green="1" blue="1" />
      <data>
        <![CDATA[
          <svg width="6" height="4" viewBox="0 0 6 4"><rect x="0.1" y="0.1" width="5.8" height="3.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
  </element>
  <element name="button_6_2_dark">
    <image state="0">
      <color red="0.2" green="0.2" blue="0.2" />
      <data>
        <![CDATA[
          <svg width="6" height="2" viewBox="0 0 6 2"><rect x="0.1" y="0.1" width="5.8" height="1.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
    <image state="1">
      <color red="1" green="1" blue="1" />
      <data>
        <![CDATA[
          <svg width="6" height="2" viewBox="0 0 6 2"><rect x="0.1" y="0.1" width="5.8" height="1.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
  </element>
  <element name="button_6_2_light">
    <image state="0">
      <color red="0.733" green="0.733" blue="0.733" />
      <data>
        <![CDATA[
          <svg width="6" height="2" viewBox="0 0 6 2"><rect x="0.1" y="0.1" width="5.8" height="1.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
    <image state="1">
      <color red="1" green="1" blue="1" />
      <data>
        <![CDATA[
          <svg width="6" height="2" viewBox="0 0 6 2"><rect x="0.1" y="0.1" width="5.8" height="1.8" rx="0.5" fill="white" /></svg>
        ]]></data>
    </image>
  </element>

  <!-- Light items -->
  <element name="light_15">
    <rect state="0" statemask="0x8000">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x8000" statemask="0x8000">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_13">
    <rect state="0" statemask="0x2000">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x2000" statemask="0x2000">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_7">
    <rect state="0" statemask="0x0080">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0080" statemask="0x0080">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_14">
    <rect state="0" statemask="0x4000">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x4000" statemask="0x4000">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_6">
    <rect state="0" statemask="0x0040">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0040" statemask="0x0040">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_4">
    <rect state="0" statemask="0x0010">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0010" statemask="0x0010">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_12">
    <rect state="0" statemask="0x1000">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x1000" statemask="0x1000">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_3">
    <rect state="0" statemask="0x0008">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0008" statemask="0x0008">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_11">
    <rect state="0" statemask="0x0800">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0800" statemask="0x0800">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_2">
    <rect state="0" statemask="0x0004">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0004" statemask="0x0004">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_10">
    <rect state="0" statemask="0x0400">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0400" statemask="0x0400">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_1">
    <rect state="0" statemask="0x0002">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0002" statemask="0x0002">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_9">
    <rect state="0" statemask="0x0200">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0200" statemask="0x0200">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_0">
    <rect state="0" statemask="0x0001">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0001" statemask="0x0001">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_8">
    <rect state="0" statemask="0x0100">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0100" statemask="0x0100">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>
  <element name="light_5">
    <rect state="0" statemask="0x0020">
      <color red="0.0667" green="0.133" blue="0.0667" />
    </rect>
    <rect state="0x0020" statemask="0x0020">
      <color red="0.133" green="1" blue="0.133" />
    </rect>
  </element>

  <!-- Slider definitions -->
  <element name="invisible_rect">
    <rect>
      <color red="0" green="0" blue="0" />
    </rect>
  </element>
  <element name="slider_frame">
    <rect>
      <color red="0.2" green="0.2" blue="0.2" />
      <bounds x="0" y="0" width="8" height="24" />
    </rect>
    <rect>
      <color red="0" green="0" blue="0" />
      <bounds x="0.5" y="0.5" width="7" height="23" />
    </rect>
  </element>
  <element name="slider_knob">
    <rect>
      <color red="0.2" green="0.2" blue="0.2" />
      <bounds x="0.75" y="0.75" width="6.5" height="4" />
    </rect>
    <rect>
      <color red="0.267" green="0.267" blue="0.267" />
      <bounds x="0.75" y="0.75" width="6.5" height="0.75" />
    </rect>
    <rect>
      <color red="0.133" green="0.133" blue="0.133" />
      <bounds x="0.75" y="2.5" width="6.5" height="0.25" />
    </rect>
    <rect>
      <color red="0.267" green="0.267" blue="0.267" />
      <bounds x="0.75" y="2.75" width="6.5" height="0.25" />
    </rect>
    <rect>
      <color red="0.133" green="0.133" blue="0.133" />
      <bounds x="0.75" y="4" width="6.5" height="0.75" />
    </rect>
  </element>
  <group name="slider">
    <element ref="slider_frame">
      <bounds x="0" y="0" width="8" height="24" />
    </element>
    <element ref="invisible_rect" id="slider_~slider_id~">
      <bounds x="0.75" y="0.75" width="6.5" height="18.5" />
    </element>
    <element ref="slider_knob" id="slider_knob_~slider_id~">
      <animate inputtag="~port_name~" inputmask="0x7f" />
      <bounds x="0.75" y="0.75" width="6.5" height="4" state="100" />
      <bounds x="0.75" y="19.25" width="6.5" height="4" state="0" />
    </element>
  </group>

  <!-- Panel Group -->
  <group name="panel">
    <element ref="background">
      <bounds x="-38" y="-4" width="218" height="43.5" />
    </element>
    <element ref="display_glass">
      <bounds x="10" y="-2" width="92" height="27" />
    </element>
    <element ref="up_triangle">
      <bounds x="-15" y="10" width="2" height="1" />
    </element>
    <element ref="down_triangle">
      <bounds x="-15" y="20" width="2" height="1" />
    </element>
    <element ref="decorative_line">
      <bounds x="-36" y="37" width="166" height="0.5" />
    </element>
    <element ref="decorative_line">
      <bounds x="108" y="37" width="22" height="0.5" />
    </element>
    <element ref="decorative_line">
      <bounds x="131" y="37" width="22" height="0.5" />
    </element>
    <element ref="decorative_line">
      <bounds x="154" y="37" width="24" height="0.5" />
    </element>
    <group ref="vfd">
      <bounds x="15" y="9.0713" width="82" height="6.8573" />

    </group>
    <element ref="text_bankset_C">
      <bounds x="10" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_sounds_C">
      <bounds x="16" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_presets_C">
      <bounds x="22" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_seq_C">
      <bounds x="28" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_0_C">
      <bounds x="42" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_1_C">
      <bounds x="48" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_2_C">
      <bounds x="54" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_3_C">
      <bounds x="60" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_4_C">
      <bounds x="66" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_5_C">
      <bounds x="72" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_6_C">
      <bounds x="78" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_7_C">
      <bounds x="84" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_8_C">
      <bounds x="90" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_9_C">
      <bounds x="96" y="35" width="6" height="1.8" />
    </element>
    <element ref="text_replace_L">
      <bounds x="108" y="25.4" width="6" height="1.8" />
    </element>
    <element ref="text_program_L">
      <bounds x="108" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_1_6_L">
      <bounds x="114" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_7_12_L">
      <bounds x="120" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_select_L">
      <bounds x="154" y="25.4" width="6" height="1.8" />
    </element>
    <element ref="text_voice_L">
      <bounds x="154" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_copy_L">
      <bounds x="160" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_write_L">
      <bounds x="166" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_compare_L">
      <bounds x="172" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_patch_L">
      <bounds x="108" y="16.4" width="6" height="1.8" />
    </element>
    <element ref="text_select_L">
      <bounds x="108" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_midi_L">
      <bounds x="114" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_effects_L">
      <bounds x="120" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_key_L">
      <bounds x="108" y="9.4" width="6" height="1.8" />
    </element>
    <element ref="text_zone_L">
      <bounds x="108" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_trans__L">
      <bounds x="114" y="9.4" width="6" height="1.8" />
    </element>
    <element ref="text_pose_L">
      <bounds x="114" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_release_L">
      <bounds x="120" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_volume_L">
      <bounds x="108" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_pan_L">
      <bounds x="114" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_timbre_L">
      <bounds x="120" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_rec_L">
      <bounds x="131" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_stop_L">
      <bounds x="137" y="25.4" width="6" height="1.8" />
    </element>
    <element ref="text__cont_L">
      <bounds x="137" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_play_L">
      <bounds x="143" y="27.2" width="6" height="1.8" />
    </element>
    <element ref="text_click_L">
      <bounds x="131" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_seq_L">
      <bounds x="137" y="16.4" width="6" height="1.8" />
    </element>
    <element ref="text_control_L">
      <bounds x="137" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_locate_L">
      <bounds x="143" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_song_L">
      <bounds x="131" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_seq_L">
      <bounds x="137" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_track_L">
      <bounds x="143" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_master_L">
      <bounds x="131" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_storage_L">
      <bounds x="137" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_midi_L">
      <bounds x="143" y="2.4" width="6" height="1.8" />
    </element>
    <element ref="text_control_L">
      <bounds x="143" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_wave_L">
      <bounds x="154" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_mod_L">
      <bounds x="160" y="16.4" width="6" height="1.8" />
    </element>
    <element ref="text_mixer_L">
      <bounds x="160" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_program_L">
      <bounds x="166" y="16.4" width="6" height="1.8" />
    </element>
    <element ref="text_control_L">
      <bounds x="166" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_effects_L">
      <bounds x="172" y="18.2" width="6" height="1.8" />
    </element>
    <element ref="text_pitch_L">
      <bounds x="154" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_pitch_L">
      <bounds x="160" y="9.4" width="6" height="1.8" />
    </element>
    <element ref="text_mod_L">
      <bounds x="160" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_filters_L">
      <bounds x="166" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_output_L">
      <bounds x="172" y="11.2" width="6" height="1.8" />
    </element>
    <element ref="text_lfo_L">
      <bounds x="154" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_env1_L">
      <bounds x="160" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_env2_L">
      <bounds x="166" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_env3_L">
      <bounds x="172" y="4.2" width="6" height="1.8" />
    </element>
    <element ref="text_volume_L">
      <bounds x="-36" y="35" width="10" height="1.8" />
    </element>
    <element ref="text_data_entry_L">
      <bounds x="-17" y="35" width="10" height="1.8" />
    </element>
    <element ref="text_performance_L">
      <bounds x="108" y="35" width="10" height="1.8" />
    </element>
    <element ref="text_sequencer_L">
      <bounds x="131" y="35" width="10" height="1.8" />
    </element>
    <element ref="text_programming_L">
      <bounds x="154" y="35" width="10" height="1.8" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00100000" ref="button_6_4_light" id="button_52__cartbankset">
      <bounds x="10" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00200000" ref="button_6_4_light" id="button_53__sounds">
      <bounds x="16" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00400000" ref="button_6_4_light" id="button_54__presets">
      <bounds x="22" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00080000" ref="button_6_4_light" id="button_51__seq">
      <bounds x="28" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00800000" ref="button_6_4_medium" id="button_55__0">
      <bounds x="42" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x01000000" ref="button_6_4_medium" id="button_56__1">
      <bounds x="48" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x02000000" ref="button_6_4_medium" id="button_57__2">
      <bounds x="54" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00004000" ref="button_6_4_medium" id="button_46__3">
      <bounds x="60" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00008000" ref="button_6_4_medium" id="button_47__4">
      <bounds x="66" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00010000" ref="button_6_4_medium" id="button_48__5">
      <bounds x="72" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00020000" ref="button_6_4_medium" id="button_49__6">
      <bounds x="78" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000008" ref="button_6_4_medium" id="button_35__7">
      <bounds x="84" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000004" ref="button_6_4_medium" id="button_34__8">
      <bounds x="90" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x02000000" ref="button_6_4_medium" id="button_25__9">
      <bounds x="96" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x20000000" ref="button_6_4_medium" id="button_29_replace_program">
      <bounds x="108" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x40000000" ref="button_6_4_medium" id="button_30_1_6">
      <bounds x="114" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x80000000" ref="button_6_4_medium" id="button_31_7_12">
      <bounds x="120" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000020" ref="button_6_4_medium" id="button_5_select_voice">
      <bounds x="154" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000200" ref="button_6_4_medium" id="button_9_copy">
      <bounds x="160" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000008" ref="button_6_4_medium" id="button_3_write">
      <bounds x="166" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000100" ref="button_6_4_medium" id="button_8_compare">
      <bounds x="172" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x04000000" ref="button_6_2_dark" id="button_26_patch_select">
      <bounds x="108" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x08000000" ref="button_6_2_dark" id="button_27_midi">
      <bounds x="114" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x10000000" ref="button_6_2_dark" id="button_28_effects">
      <bounds x="120" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000080" ref="button_6_2_dark" id="button_39_key_zone">
      <bounds x="108" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000100" ref="button_6_2_dark" id="button_40_transpose">
      <bounds x="114" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000200" ref="button_6_2_dark" id="button_41_release">
      <bounds x="120" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000010" ref="button_6_2_dark" id="button_36_volume">
      <bounds x="108" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000020" ref="button_6_2_dark" id="button_37_pan">
      <bounds x="114" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000040" ref="button_6_2_dark" id="button_38_timbre">
      <bounds x="120" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00080000" ref="button_6_4_medium" id="button_19_rec">
      <bounds x="131" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00400000" ref="button_6_4_medium" id="button_22_stop_cont">
      <bounds x="137" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00800000" ref="button_6_4_medium" id="button_23_play">
      <bounds x="143" y="29" width="6" height="4" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000001" ref="button_6_2_dark" id="button_32_click">
      <bounds x="131" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00040000" ref="button_6_2_dark" id="button_18_seq_control">
      <bounds x="137" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000002" ref="button_6_2_dark" id="button_33_locate">
      <bounds x="143" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x10000000" ref="button_6_2_dark" id="button_60_song">
      <bounds x="131" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x08000000" ref="button_6_2_dark" id="button_59_seq">
      <bounds x="137" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x20000000" ref="button_6_2_dark" id="button_61_track">
      <bounds x="143" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00100000" ref="button_6_2_light" id="button_20_master">
      <bounds x="131" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00200000" ref="button_6_2_light" id="button_21_storage">
      <bounds x="137" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x01000000" ref="button_6_2_light" id="button_24_midi_control">
      <bounds x="143" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000010" ref="button_6_2_dark" id="button_4_wave">
      <bounds x="154" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000040" ref="button_6_2_dark" id="button_6_mod_mixer">
      <bounds x="160" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000004" ref="button_6_2_dark" id="button_2_program_control">
      <bounds x="166" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000080" ref="button_6_2_dark" id="button_7_effects">
      <bounds x="172" y="20" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000800" ref="button_6_2_dark" id="button_11_pitch">
      <bounds x="154" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00002000" ref="button_6_2_dark" id="button_13_pitch_mod">
      <bounds x="160" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00008000" ref="button_6_2_dark" id="button_15_filters">
      <bounds x="166" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00020000" ref="button_6_2_dark" id="button_17_output">
      <bounds x="172" y="13" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00000400" ref="button_6_2_dark" id="button_10_lfo">
      <bounds x="154" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00001000" ref="button_6_2_dark" id="button_12_env1">
      <bounds x="160" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00004000" ref="button_6_2_dark" id="button_14_env2">
      <bounds x="166" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_0" inputmask="0x00010000" ref="button_6_2_dark" id="button_16_env3">
      <bounds x="172" y="6" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00040000" ref="button_6_2_dark" id="button_50__display_below_left">
      <bounds x="32" y="21" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00001000" ref="button_6_2_dark" id="button_44__display_below_middle">
      <bounds x="57" y="21" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00002000" ref="button_6_2_dark" id="button_45__display_below_right">
      <bounds x="82" y="21" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x04000000" ref="button_6_2_dark" id="button_58__display_above_left">
      <bounds x="32" y="0" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000400" ref="button_6_2_dark" id="button_42__diplay_above_center">
      <bounds x="57" y="0" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x00000800" ref="button_6_2_dark" id="button_43__display_above_right">
      <bounds x="82" y="0" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x80000000" ref="button_6_2_dark" id="button_63__increment">
      <bounds x="-17" y="22" width="6" height="2" />
    </element>
    <element inputtag="buttons_32" inputmask="0x40000000" ref="button_6_2_dark" id="button_62__decrement">
      <bounds x="-17" y="12" width="6" height="2" />
    </element>
    <element name="lights" ref="light_15">
      <bounds x="12" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_13">
      <bounds x="18" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_7">
      <bounds x="24" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_14">
      <bounds x="44" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_6">
      <bounds x="50" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_4">
      <bounds x="56" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_12">
      <bounds x="62" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_3">
      <bounds x="68" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_11">
      <bounds x="74" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_2">
      <bounds x="80" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_10">
      <bounds x="86" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_1">
      <bounds x="92" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_9">
      <bounds x="98" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_0">
      <bounds x="116" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_8">
      <bounds x="122" y="29.16" width="1.5" height="1.3333" />
    </element>
    <element name="lights" ref="light_5">
      <bounds x="174" y="29.16" width="1.5" height="1.3333" />
    </element>
    <param name="slider_id" value="data_entry" />
    <param name="port_name" value="analog_data_entry" />
    <group ref="slider">
      <bounds x="-8" y="4" width="8" height="24" />
    </group>
    <param name="slider_id" value="volume" />
    <param name="port_name" value="analog_volume" />
    <group ref="slider">
      <bounds x="-36" y="4" width="8" height="24" />
    </group>
  </group>

  <!-- Panel View -->
  <view name="Panel">
    <group ref="panel" />
  </view>
  <script>
    <![CDATA[
      -- file is the layout file object
      -- set a function to call after resolving tags
      file:set_resolve_tags_callback(
        function ()
          -- file.device is the device that caused the layout to be loaded
          -- in this case, it's the esqpanel2x40_vfx object.

          for view_name, view in pairs(file.views) do
            install_slider_callbacks(view)

            add_vertical_slider(view, "slider_volume", "slider_knob_volume", "analog_volume")
            add_vertical_slider(view, "slider_data_entry", "slider_knob_data_entry", "analog_data_entry")

            -- TODO: Display a warning about how to enable sliders
            -- view.items["warning"]:set_state(0)
          end
        end
      )

      -----------------------------------------------------------------------
      -- Simplified Slider library starts.
      -- Can be copied as-is to other layouts.
      -- It is simplified from its source:
      -- * This one never reads from the port, only writes to it.
      -- * Only when clickling on the knob itself does it start to drag the knob.
      -- * The value is calculated based on the position of the knob within the click area.
      -----------------------------------------------------------------------
      local sliders = {}   -- Stores slider information.
      local pointers = {}  -- Tracks pointer state.

      function clamp(x)
        if x < 0 then return 0 elseif x > 100 then return 100 else return x end
      end

      -- The knob's Y position must be animated using <animate inputtag="{port_name}">.
      -- The click area's vertical size must exactly span the range of the
      -- knob's movement.
      function add_vertical_slider(view, clickarea_id, knob_id, port_name)
        local slider = {}

        slider.clickarea = view.items[clickarea_id]
        if slider.clickarea == nil then
          emu.print_error("Slider element: '" .. clickarea_id .. "' not found.")
          return
        end

        slider.knob = view.items[knob_id]
        if slider.knob == nil then
          emu.print_error("Slider knob element: '" .. knob_id .. "' not found.")
          return
        end

        local port = file.device:ioport(port_name)
        if port == nil then
          emu.print_error("Port: '" .. port_name .. "' not found.")
          return
        end

        slider.field = nil
        for k, val in pairs(port.fields) do
          slider.field = val
          break
        end
        if slider.field == nil then
          emu.print_error("Port: '" .. port_name .."' does not seem to be an IPT_ADJUSTER.")
          return
        end

        table.insert(sliders, slider)
      end

      local function pointer_updated(type, id, dev, x, y, btn, dn, up, cnt)
        -- If a button is not pressed, reset the state of the current pointer.
        if btn & 1 == 0 then
          pointers[id] = nil
          return
        end

        -- If a button was just pressed, find the affected slider, if any.
        if dn & 1 ~= 0 then
          for i = 1, #sliders do
            if sliders[i].knob.bounds:includes(x, y) then
              pointers[id] = {
                selected_slider = i,
                dy = y - sliders[i].knob.bounds.y0 -- position within the knob where it was clicked
              }
              break
            end
          end
        end

        -- If there is no slider selected by the current pointer, we are done.
        if pointers[id] == nil then
          return
        end

        -- A slider is selected. Update state and, indirectly, slider knob position,
        -- based on the pointer's Y position. It is assumed the attached IO field is
        -- an IPT_ADJUSTER with a range of 0-100 (the default).

        local pointer = pointers[id]
        local slider = sliders[pointer.selected_slider]
        local knob = slider.knob
        local clickarea = slider.clickarea

        local new_value = 0
        -- User clicked on the knob. The new value will depend on how much the
        -- knob was dragged.
        local yy = y - pointer.dy
        new_value = 100 * (1 - (yy - clickarea.bounds.y0) / (clickarea.bounds.height - knob.bounds.height))
        new_value = math.floor(new_value + 0.5)
        clamped_value = clamp(new_value)
        slider.field.user_value = clamped_value
      end

      local function pointer_left(type, id, dev, x, y, up, cnt)
        pointers[id] = nil
      end

      local function pointer_aborted(type, id, dev, x, y, up, cnt)
        pointers[id] = nil
      end

      local function forget_pointers()
        pointers = {}
      end

      function install_slider_callbacks(view)
        view:set_pointer_updated_callback(pointer_updated)
        view:set_pointer_left_callback(pointer_left)
        view:set_pointer_aborted_callback(pointer_aborted)
        view:set_forget_pointers_callback(forget_pointers)
      end
      -----------------------------------------------------------------------
      -- Slider library ends.
      -----------------------------------------------------------------------

    ]]></script>
</mamelayout>

